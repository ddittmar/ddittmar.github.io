(function(){var b=Array.prototype.slice;String.hasOwnProperty("format")||(String.format=function(g){var d=b.call(arguments,1);return g.replace(/\{(\d+)\}/g,function(b,g){return"undefined"!==typeof d[g]?d[g]:b})});String.hasOwnProperty("rot13")||(String.prototype.rot13=function(){return this.replace(/[a-zA-Z]/g,function(b){return String.fromCharCode(("Z">=b?90:122)>=(b=b.charCodeAt(0)+13)?b:b-26)})});Function.hasOwnProperty("curry")||(Function.prototype.curry=function(){var g=this,d=b.call(arguments);
return function(){var h=d.concat(b.call(arguments));return g.apply(this,h)}})})();(function(b){jQuery.cachedScript=function(g,d){d=b.extend(d||{},{dataType:"script",cache:!0,url:g});return jQuery.ajax(d)}})(jQuery);
var App=function(b){function g(a,b){this.code=a;this.message=b}function d(a,c,e){var f=String.format("{0}?method={1}&api_key={2}&user_id={3}&format=json&jsoncallback=App.{4}","https://api.flickr.com/services/rest/",a,"5829e1bcf08076b3ad92b34958fe8c3b","36825657@N03",c);e&&b.each(e,function(a,b){f+="&"+a+"="+b});b.cachedScript(f)}function h(a){if("ok"!==a.stat)throw window.alert(String.format("FlickrApiException {0}: {1}",a.code,a.message)),new g(a.code,a.message);}function v(a,b){for(var e=[],f=0,
d=a.length;f<d;)e.push(a.slice(f,f+=b));return e}function n(a,b){return String.format("https://farm{0}.staticflickr.com/{1}/{2}_{3}_{4}.jpg",a.farm,a.server,a.id,a.secret,b)}function p(a){a=v(a,6);var c=document.createDocumentFragment();b.each(a,function(a,f){var d=b("<div>").addClass("row");b.each(f,function(a,c){var f=n(c,"q"),e=n(c,"b"),e=b("<a>").addClass("galleryImage").attr("href",e).attr("title",c.title).attr("id","picid_"+c.id).attr("data-gallery",""),f=b("<img>").attr("src",f).addClass("center-block").addClass("img-responsive").addClass("img-rounded").attr("height",
150).attr("width",150).attr("style","margin-bottom: 22px;");e.append(f);f=b("<div>").addClass("col-lg-2").addClass("col-md-2").addClass("col-sm-4").addClass("col-xs-4");f.append(e);d.append(f)});c.appendChild(d[0])});b("#gallery").empty()[0].appendChild(c)}function q(a){h(a);p(a.photos.photo)}function r(a,c){var e=b("#pager");1===a?e.find(".previous").addClass("disabled"):e.find(".previous").removeClass("disabled");a===c?e.find(".next").addClass("disabled"):e.find(".next").removeClass("disabled");
e.data("page",parseInt(a,10))}function t(a){k=t;d("flickr.photos.search","drawGalleryWithPaging",{page:a,per_page:24,content_type:1,sort:"interestingness-desc",user_id:"36825657@N03"})}function l(a){k=l;d("flickr.people.getPhotos","drawGalleryWithPaging",{page:a,per_page:24,content_type:1})}function u(a,b){k=u.curry(a);d("flickr.photosets.getPhotos","drawAlbumWithPaging",{photoset_id:a,page:b,per_page:24})}function m(a){a.parents("ul").find("li").removeClass("active");a.parent("li").addClass("active")}
var k;b(document).on("click","a#loadLatestUploadsGallery",function(a){a.preventDefault();m(b(this));ga("send","event","loadLatestUploadsGallery","click");l(1)});b(document).on("click","a#loadInterestingnessGallery",function(a){a.preventDefault();m(b(this));ga("send","event","loadInterestingnessGallery","click");t(1)});b(document).on("click","a.loadAlbumGallery",function(a){a.preventDefault();m(b(this));a=b(this).data("photoset_id");ga("send","event","loadAlbumGallery","click","photosetid_"+a);u(a,
1)});b(document).on("click","a#prevGalleryPage",function(a){a.preventDefault();a=b("#pager").data("page")-1;ga("send","event","page","click","prev",a);k(a)});b(document).on("click","a#nextGalleryPage",function(a){a.preventDefault();b(this).parent("li").hasClass("disabled")||(a=b("#pager").data("page")+1,ga("send","event","page","click","next",a),k(a))});b(document).on("click","a.galleryImage",function(a){ga("send","event","galleryImage","click",b(this).attr("id"))});b(document).on("click",".social > a",
function(a){a.preventDefault();var c=b(this).attr("href");ga("send","event","social","click",c,{hitCallback:function(){document.location=c}})});b(document).on("click","a.btn-twitter",function(a){a.preventDefault();var c=b(this),e=c.data("url");ga("send","social","twitter","share",e,{hitCallback:function(){var a=String.format("{0}?key={1}","https://www.googleapis.com/urlshortener/v1/url","AIzaSyCnShRHKnpRuViY9tfYPHEzeGxycwN__8Y");b.ajax({url:a,type:"POST",data:JSON.stringify({longUrl:e}),processData:!1,
contentType:"application/json",dataType:"json",success:function(a){a=a.id;a=String.format("{0}?url={1}&via={2}&hashtags={3}&text={4}",c.attr("href"),encodeURIComponent(a),c.data("via"),c.data("hashtags"),c.data("text"));document.location=a}})}})});b(document).on("click","a.btn-facebook",function(a){a.preventDefault();var c=b(this),e=c.data("href");ga("send","social","facebook","share",e,{hitCallback:function(){var a=c.attr("href"),a=String.format("{0}?app_id={1}&display={2}&href={3}&redirect_uri={4}",
a,c.data("app_id"),c.data("display"),encodeURIComponent(e),encodeURIComponent(c.data("redirect_uri")));document.location=a}})});return{loadLandingPageGallery:function(){d("flickr.people.getPhotos","drawGallery",{per_page:24,content_type:1})},drawGallery:q,onLoadGallery:function(){d("flickr.photosets.getList","drawPhotosets",{});l(1)},drawPhotosets:function(a){h(a);var c=document.createDocumentFragment();b.each(a.photosets.photoset,function(a,f){var d=b("<a>").addClass("loadAlbumGallery").attr("title",
f.title._content).attr("href","#"+encodeURIComponent(f.title._content)).data("photoset_id",f.id).text(f.title._content),d=b("<li>").append(d);c.appendChild(d[0])});b("ul#albums")[0].appendChild(c)},drawGalleryWithPaging:function(a){q(a);r(parseInt(a.photos.page,10),parseInt(a.photos.pages,10))},drawAlbumWithPaging:function(a){h(a);p(a.photoset.photo);r(parseInt(a.photoset.page,10),parseInt(a.photoset.pages,10))},clickBtnGooglePlus:function(a){a=b(a);ga("send","social","google-plus","share",a.data("url"));
a=String.format("{0}?url={1}",a.attr("href"),encodeURIComponent(a.data("url")));window.open(a,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}}}(jQuery);
